<form ng-submit="vm.save()">
    <h2>{{ ::(vm.isNew ? 'Create' : 'Edit' ) }} transaction </h2>

    <md-content>
        <md-input-container class="md-block" mass-autocomplete>
            <label>Description</label>
            <input type="text" required
                   ng-model="vm.transaction.description"
                   mass-autocomplete-item="{'suggest': vm.suggestDescription}"/>
        </md-input-container>


        <md-input-container class="md-block" >
            <label>Date</label>
            <!--<md-datepicker ng-model="vm.transaction.date" required></md-datepicker>-->
            <input type="date" ng-model="vm.transaction.date" required />
        </md-input-container>


        <md-input-container class="md-block" >
            <label>Type</label>
            <md-select ng-model="vm.transaction.type" required>
                <md-option value="Expense">Expense</md-option>
                <md-option value="Income">Income</md-option>
                <md-option value="Transfer">Transfer</md-option>
            </md-select>
        </md-input-container>

        <md-input-container class="md-block" >
            <label>Amount</label>
            <input type="number" min="-10000000" max="10000000"
                   ng-model="vm.transaction.amount"
                   required />
        </md-input-container>

        <md-input-container class="md-block" >
            <label>Account</label>
            <md-select ng-model="vm.transaction.accountId" required>
                <!--ng-options="acc.id as acc.name for acc in vm.accounts"-->
                <md-option ng-repeat="acc in vm.accounts" value="{{ acc.id }}">
                    {{ acc.name }}
                </md-option>
            </md-select>
        </md-input-container>


        <md-input-container ng-if="vm.transaction.type === 'Transfer'" class="md-block" >
            <label>To account</label>
            <md-select ng-model="vm.transaction.toAccountId">
                <md-option ng-repeat="acc in vm.accounts" value="{{ acc.id }}">
                    {{ acc.name }}
                </md-option>
            </md-select>
        </md-input-container>

        <md-input-container class="md-block" >
            <label>Tags</label>
            <md-select ng-model="vm.transaction.tagIds" multiple>
                <md-option ng-repeat="tag in vm.tags" value="{{ tag.id }}">
                    {{ tag.name }}
                </md-option>
            </md-select>
        </md-input-container>
    </md-content>

    <md-content>
        <md-checkbox ng-if="::vm.isNew" ng-model="vm.createAnother">
            Create another
        </md-checkbox>

        <md-button type="submit" class="md-raised md-primary">
            Save
        </md-button>

        <a class="button secondary sf-button" state-ref="app.transaction">
            <md-button class="md-raised">
                Cancel
            </md-button>
        </a>

        <md-button ng-if="::!vm.isNew" ng-click="vm.delete()"
                   class="md-raised md-warn" >
            Delete
        </md-button>
    </md-content>
</form>